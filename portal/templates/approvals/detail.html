{% extends "base.html" %}
{% block title %}Approval Detail{% endblock %}
{% block page_actions %}
<a class="btn btn-secondary" href="{{ url_for('approval_queue') }}">Back</a>
{% endblock %}
{% block content %}
<div id="editor-container" class="vh-100 overflow-auto">
  <iframe id="docEditor" class="w-100 h-100 border-0" title="Document preview" loading="lazy"></iframe>
</div>
<script nonce="{{ csp_nonce }}">
  const editorConfig = {{ config | tojson }};
  const editorToken = {{ token | tojson }};
</script>
<script src="{{ editor_js }}"></script>
<script nonce="{{ csp_nonce }}">
  if (editorToken && window.DocsAPI && window.DocsAPI.setRequestHeaders) {
    window.DocsAPI.setRequestHeaders([{ header: '{{ token_header|default("Authorization") }}', value: editorToken }]);
  }
  window.docEditor = new DocsAPI.DocEditor('docEditor', editorConfig);
</script>
{% endblock %}
