{% extends "base.html" %}
{% block title %}Approval Detail{% endblock %}
{% block page_actions %}
<link rel="stylesheet" href="{{ url_for('static', filename='toolbar/toolbar.css') }}">
<div class="toolbar" data-component="toolbar">
  <a class="btn btn-secondary" href="{{ url_for('approval_queue') }}">Back</a>
</div>
<script type="module" src="{{ url_for('static', filename='toolbar/toolbar.js') }}"></script>
{% endblock %}
{% block content %}
<div class="alert alert-info mb-3">Review the document, add a comment, then choose to approve or reject.</div>
<div id="editor-container" class="vh-100 overflow-auto">
  <iframe id="docEditor" class="w-100 h-100 border-0" title="Document preview" loading="lazy"></iframe>
</div>
<script>
  const editorConfig = {{ config | tojson }};
  const editorToken = {{ token | tojson }};
</script>
<script src="{{ editor_js }}"></script>
<script>
  if (editorToken && window.DocsAPI && window.DocsAPI.setRequestHeaders) {
    window.DocsAPI.setRequestHeaders([{ header: '{{ token_header|default("Authorization") }}', value: 'Bearer ' + editorToken }]);
  }
  window.docEditor = new DocsAPI.DocEditor('docEditor', editorConfig);
</script>
{% endblock %}
