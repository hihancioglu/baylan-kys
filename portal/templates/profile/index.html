{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
<h3>Profile</h3>
<div class="mb-4">
  <p><strong>Username:</strong> {{ current_user.username }}</p>
  <p><strong>User ID:</strong> {{ current_user.id }}</p>
</div>
<form id="preferences-form" class="" onsubmit="return false;">
  <div class="mb-3">
    <label for="pref-language" class="form-label">Language</label>
    <select id="pref-language" class="form-select">
      <option value="en">English</option>
      <option value="tr">Türkçe</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="pref-theme" class="form-label">Theme</label>
    <select id="pref-theme" class="form-select">
      <option value="light">Light</option>
      <option value="dark">Dark</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="pref-density" class="form-label">Table Density</label>
    <select id="pref-density" class="form-select">
      <option value="comfortable">Comfortable</option>
      <option value="compact">Compact</option>
    </select>
  </div>
</form>
<script>
(function() {
  function setPref(key, value) {
    localStorage.setItem(key, value);
    document.cookie = key + '=' + value + ';path=/;max-age=31536000';
  }
  const langSel = document.getElementById('pref-language');
  const themeSel = document.getElementById('pref-theme');
  const densitySel = document.getElementById('pref-density');
  const initLang = localStorage.getItem('pref-language') || 'en';
  const initTheme = localStorage.getItem('pref-theme') || 'light';
  const initDensity = localStorage.getItem('pref-density') || 'comfortable';
  langSel.value = initLang;
  themeSel.value = initTheme;
  densitySel.value = initDensity;
  langSel.addEventListener('change', (e) => {
    setPref('pref-language', e.target.value);
    document.documentElement.lang = e.target.value;
  });
  themeSel.addEventListener('change', (e) => {
    setPref('pref-theme', e.target.value);
    document.documentElement.setAttribute('data-bs-theme', e.target.value);
  });
  densitySel.addEventListener('change', (e) => {
    setPref('pref-density', e.target.value);
    document.documentElement.setAttribute('data-density', e.target.value);
  });
})();
</script>
{% endblock %}
