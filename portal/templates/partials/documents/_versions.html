<form method="get" action="{{ url_for('compare_document_versions', doc_id=doc.id) }}">
  <div class="row">
    <div class="col-md-8">
      <ul class="list-group">
        {% for rev in revisions %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
            <input class="form-check-input me-2 version-checkbox" type="checkbox" name="rev_id" value="{{ rev.id }}" id="rev-{{ rev.id }}" data-label="{{ rev.major_version }}.{{ rev.minor_version }}" hx-get="{{ url_for('document_detail', doc_id=doc.id, revision_id=rev.id) }}" hx-target="#revision-panel" hx-select="#revision-note" hx-swap="innerHTML" hx-trigger="change" hx-push-url="false">
            <label class="form-check-label" for="rev-{{ rev.id }}">{{ rev.major_version }}.{{ rev.minor_version }}</label>
          </div>
          <small class="text-muted">{{ rev.created_at.strftime('%Y-%m-%d') if rev.created_at else '' }}</small>
        </li>
        {% else %}
        <li class="list-group-item">No versions found.</li>
        {% endfor %}
      </ul>
      <button type="submit" id="compare-button" class="btn btn-secondary mt-2" disabled>Compare</button>
    </div>
    <div class="col-md-4">
      <div id="revision-panel">
        {% if revision %}
        <div id="revision-note">
          <h5>Version {{ revision.major_version }}.{{ revision.minor_version }}</h5>
          <p>{{ revision.revision_notes or 'No revision notes.' }}</p>
          <a class="btn btn-outline-primary mt-2" href="{{ url_for('compare_document_versions', doc_id=doc.id) }}?rev_id={{ revision.id }}&rev_id={{ (revisions|first).id }}">Compare</a>
          <a class="btn btn-outline-secondary mt-2" href="{{ url_for('download_document', doc_id=doc.id) }}">Download</a>
        </div>
        {% else %}
        <div id="revision-note">
          <p>Select a version to view its note.</p>
        </div>
        {% endif %}
      </div>
      <h5 class="mt-3">Selected Versions</h5>
      <ul id="selected-versions" class="list-group"></ul>
    </div>
  </div>
</form>

