{% extends "base.html" %}

{% block title %}{{ doc.title }}{% endblock %}

{% block content %}
<h1>{{ doc.title }}</h1>
{% if preview.type %}
<div id="preview-container" class="mb-4"></div>
<script>
  window.previewData = {{ preview | tojson }};
</script>
<script type="module" src="{{ url_for('static', filename='document_preview.js') }}"></script>
{% endif %}
<ul>
  <li><strong>Code:</strong> {{ doc.code }}</li>
  <li><strong>Status:</strong> {{ doc.status }}</li>
  <li><strong>Tags:</strong> {{ doc.tags or "" }}</li>
</ul>

<h2>Revision History</h2>
{% if revisions %}
<ul>
  {% for rev in revisions %}
  <li>Version {{ rev.major_version }}.{{ rev.minor_version }} â€“ {{ rev.created_at.strftime('%Y-%m-%d') }}</li>
  {% endfor %}
</ul>
{% else %}
<p>No revisions found.</p>
{% endif %}

<p>
  <a href="{{ url_for('list_documents') }}">Back to documents</a>
  |
  <a href="{{ url_for('download_document', doc_id=doc.id) }}">Download</a>
</p>
{% endblock %}

