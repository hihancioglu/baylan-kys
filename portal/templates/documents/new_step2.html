{% extends "base.html" %}
{% block title %}New Document - Step 2{% endblock %}
{% block content %}
<h1 class="fw-bold page-title">New Document - Step 2</h1>
{% if errors %}
<div class="alert alert-danger">Please correct the errors below.</div>
{% endif %}
<form method="post" action="{{ url_for('new_document', step=2) }}" enctype="multipart/form-data">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

  <div class="mb-3">
    <label for="template" class="form-label">Template</label>
    <select class="form-select{% if errors.template %} is-invalid{% endif %}" id="template" name="template" title="Select a template">
      <option value="">-- Select Template --</option>
      {% for group, files in template_options.items() %}
        <optgroup label="{{ group|capitalize }}">
          {% for file in files %}
            <option value="{{ group }}/{{ file }}"{% if form.template == group ~ '/' ~ file %} selected{% endif %}>{{ file }}</option>
          {% endfor %}
        </optgroup>
      {% endfor %}
    </select>
    {% if errors.template %}<div class="invalid-feedback">{{ errors.template }}</div>{% endif %}
  </div>

  <div class="mb-3">
    <label for="upload_file" class="form-label">Upload File</label>
    <input type="file" class="form-control{% if errors.upload_file %} is-invalid{% endif %}" id="upload_file" name="upload_file" title="Upload document file">
    {% if errors.upload_file %}<div class="invalid-feedback">{{ errors.upload_file }}</div>{% endif %}
  </div>

  <button type="submit" class="btn btn-primary" id="next-step2" title="Proceed to next step">Next</button>
</form>

<script type="module" src="{{ url_for('static', filename='documents/new_step2.js') }}"></script>
{% endblock %}
