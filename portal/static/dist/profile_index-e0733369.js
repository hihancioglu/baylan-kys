function setPref(key, value) {localStorage.setItem(key, value);document.cookie = `${key}=${value};path=/;max-age=31536000`;}document.addEventListener('DOMContentLoaded', () => {const form = document.getElementById('preferences-form');if (form) {form.addEventListener('submit', (e) => e.preventDefault());}const langSel = document.getElementById('pref-language');const themeSel = document.getElementById('pref-theme');const densitySel = document.getElementById('pref-density');const initLang = localStorage.getItem('pref-language') || 'en';const initTheme = localStorage.getItem('pref-theme') || 'light';const initDensity = localStorage.getItem('pref-density') || 'comfortable';if (langSel) langSel.value = initLang;if (themeSel) themeSel.value = initTheme;if (densitySel) densitySel.value = initDensity;if (langSel) {langSel.addEventListener('change', (e) => {setPref('pref-language', e.target.value);document.documentElement.lang = e.target.value;});}if (themeSel) {themeSel.addEventListener('change', (e) => {setPref('pref-theme', e.target.value);document.documentElement.setAttribute('data-bs-theme', e.target.value);});}if (densitySel) {densitySel.addEventListener('change', (e) => {setPref('pref-density', e.target.value);document.documentElement.setAttribute('data-density', e.target.value);});}});